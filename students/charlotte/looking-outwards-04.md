#Looking Outwards 4

## Hole Filling Strategy for Kinect Depth Maps

[Link to article](http://proceedings.spiedigitallibrary.org/proceeding.aspx?articleid=1345471)

![picure-sorry-link-is-so-long-2lazy2change](data:image/jpeg;base64,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)

***"This approach has been used for depth map denoising by considering visual information; in it has been employed to reduce the noise of depth images that is generated by an upsampling procedure; in a trilateral
filter is used to filter depth maps generated by stereo pairs, considering also a confidence measure of the stereo matching
algorithm in the filter weights selection, thus this approach can not be applied in our case where the depth map has been
obtained with an active device."***

The technique used here includes using two video inputs to patch up the gaps on edges. The two disparity maps are used to recover the missing information (aka ndm- no depth measured pixles). 

The bilateral filter is an edge-preserving filtering technique where [the kernel filter](https://en.wikipedia.org/wiki/Kernel_adaptive_filter) weights are modified as a function of the [photometric similarity between pixels](http://homepages.inf.ed.ac.uk/rbf/CVonline/LOCAL_COPIES/MANDUCHI1/Bilateral_Filtering.html), thus giving higher weights to pixels belonging to similar regions, and reducing the blurring effect in the edges, where photometric discontinuities are present.

So its like the threshhold filter you put on in photoshop. it does its best to categorize the missing data without blending its neighbors like other algorithms do. 

This is the core of the formula they used:

![](images/algo.png)

Thats a looker! The intensity of the pixel J^p is calculated from the summation of its neighboring pixels & f(p, q) which is a 2D smoothing kernel also known as domain term, that measures the closeness of the pixels; g(|I^p − I^q|)
is the range term that measures the intensity (or color in case of 3-channels images) similarity of the pixels. 

Close to Gaussian function!

How this could apply to what I could use it is if I was working with raw kinect input that was super noisey & full of holes I could find all the places in the matrix that was missing depth data and translate the function to whatever language Im working in and run the data through to get some smooth replacement. There are more functions in the article that Im not sure I would need for my purposes, unless I needed some perfect data.
